---
title: 'Contentlayer - How it works'
description: ''
pubDate: 'Feb 24 2024'
heroImage: '/blog-placeholder-1.jpg'
---

_Note: Official docs for [Contentlayer](https://contentlayer.dev/) are [here](https://contentlayer.dev/docs). Those were unavailable while creation of this document.
We are using old docs provided in [Contentlayer's Discord](https://discord.gg/rytFErsARm) [here](https://website-git-new-landing-page-schick.vercel.app/docs)_

## The workings of Contentlayer

how contentlayer works under the hood, and helps us integrating content with our code.

The workings are divided into 3 parts:

1. Transformation Content into Data
2. Structuring Loose Data
3. Defining Data Types

### 1. Transformation of Content into Data

__Contentlayer__ helps us to transform our _content_ into a JavaScript object, which we can export and use throughout our React/Next project.

### 2. Structuring loose data

content management systems like `Contentful` provide us with a _content schema_ after publishing the article.

working with a Schema less object/content is painful, especially displaying the external/local (files) content on frontend.

Contentlayer helps us define a schema for those files.

### 3. Defining Types for generated schema

i.e. Defining data types.

Contentlayer automatically takes care of producing _types_ for our content schema.

this helps in type checking and further enhances dev experience when using typeScript.

## Modeling the Content 

Contentlayer's primary job is to do Content modeling, i.e. building content schema.

This can be done in two ways.

1. Remote Source (api)
2. Local Source (files)

I will just be dealing with local source (files) only. Let's look into that.

### Local Source

Contentlayer expects us to explicitly define a Schema when using a local file.

#### Documents vs Nested (docs)

there are two types of objects that contentlayer deals with - _documents and nested (documents)_

**Documents** objects are generated by contentlayer from a _document type definition_. We can say the document type is like a model or a table in a database.

A document is an instance of that model (type/schema).

Contentlayer creates documents to individual JSON files.

**Nested** documents are objects that are embedded directly in a document.

They are defines as _nested types_ and primarily used for repeatable shapes (interface?)

#### Content Reference

content reference is handled similar to databases. A content can be associated with other content.

## Type Safety

Contentlayer discusses type safety with use of TypeScript, its benefits and why we must use it in our project.

### Using TypeScript with Contentlayer

Contentlayer automatically generates type definitions for the transformed content.

Contentlayer caches all transformed content locally as JSON data. 


Example typescript code
```typescript
import { allPosts, Post } from 'contentlayer/generated'

export async function getStaticProps({ params }) {
  const post: Post = allPosts.find((post) => post._raw.flattenedPath === params.slug)
  return { props: { post } }
}
```